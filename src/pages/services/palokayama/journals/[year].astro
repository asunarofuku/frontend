---
import PalokayamaLayout from "../../../../layouts/services/PalokayamaLayout.astro";
import {
  groupJournalFilesByYear,
  type PdfFile,
} from "../../../../components/services/journals/JournalData";
import JournalList from "../../../../components/services/journals/JournalList.astro";
import ServicesH from "../../../../components/ServicesH.astro";
export const prerender = true;
export async function getStaticPaths() {
  const data = groupJournalFilesByYear();
  return data.map(([year, files]) => {
    console.log(year);
    return {
      params: { year: year },
      props: { files },
    };
  });
}
interface Props {
  files: PdfFile[];
}
const { year } = Astro.params;
const { files } = Astro.props;

const archives: any[] = [];

files.map((item) => {
  archives.push({
    date: "",
    title: item.title,
    imagePath: "/journals/" + item.thumbnail,
    imageAlt: item.title,
    url: "/journals/" + item.path,
  });
});

const crumbs = [
  {
    text: "ホーム",
    href: "/",
  },
  {
    text: "ぱる・おかやま",
    href: "../",
  },
  {
    text: "ぱる通信",
    href: "./",
  },
  {
    text: `ぱる通信 ${year}年`,
  },
];
---

<PalokayamaLayout
  title={`ぱる通信 ${year}年`}
  title_en="地域活動支援センターI型 ぱる・おかやま"
  tocItems={null}
  crumbs={crumbs}
>
  <div class="container mx-auto">
    <section class="mb-24" id="archive">
      <ServicesH>アーカイブ</ServicesH>
      <JournalList items={archives} />
    </section>
  </div>
</PalokayamaLayout>
